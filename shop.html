<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OrcaX NFT ì¿ í° ìƒì </title>
  <style>
    body {
      background: #111;
      color: #00e0c7;
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 2rem;
    }
    .coupon-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 2rem;
    }
    .coupon-card {
      background: #222;
      border-radius: 1rem;
      padding: 1rem;
      width: 300px;
      box-shadow: 0 0 20px rgba(0,255,255,0.2);
    }
    .coupon-card img {
      width: 100%;
      border-radius: 1rem;
      cursor: pointer;
    }
    .buy-btn, .wallet-btn {
      margin-top: 1rem;
      padding: 0.6rem 1.2rem;
      background: linear-gradient(135deg,#00ffc3,#00b2ff);
      color: #111;
      border: none;
      border-radius: 2rem;
      font-weight: bold;
      cursor: pointer;
      transition: 0.2s;
    }
    .modal, .desc-modal {
      display: none;
      position: fixed;
      z-index: 999;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      justify-content: center;
      align-items: center;
    }
    .modal-content, .desc-modal-content {
      background: #1c1c1c;
      color: #00e0c7;
      padding: 2rem;
      border-radius: 1rem;
      width: 90%;
      max-width: 400px;
      text-align: left;
    }
    .close-btn {
      float: right;
      color: #ff6666;
      font-size: 1.2rem;
      cursor: pointer;
    }
    label {
      display: block;
      margin: 1rem 0 0.5rem;
    }
    input {
      width: 100%;
      padding: 0.5rem;
      border-radius: 0.5rem;
      border: 1px solid #00ffc3;
      background: #111;
      color: white;
    }
    .summary {
      margin-top: 1rem;
      background: #222;
      padding: 1rem;
      border-radius: 1rem;
    }
    .wallet-section {
      margin-top: 2rem;
    }
  </style>
</head>
<body>

  <h1>OrcaX NFT ì¿ í° ìƒì </h1>
  <button class="wallet-btn" onclick="connectPhantom()">íŒ¬í…€ ì§€ê°‘ ì—°ê²°</button>

  <div class="wallet-section">
    <h4>ğŸ“¬ íŒë§¤ì ì§€ê°‘ ì£¼ì†Œ</h4>
    <div style="background:#333; padding:0.7rem; border-radius:1rem; display:flex; justify-content:space-between; align-items:center;">
      <span id="walletAddress">-</span>
      <button onclick="copyWallet()" style="margin-left:1rem; padding:0.4rem 1rem; background:#00ffc3; color:#111; border:none; border-radius:1rem; font-weight:bold; cursor:pointer;">ë³µì‚¬</button>
    </div>
  </div>

  <!-- ì¿ í° ì¹´ë“œ 3ì¢… ì¶”ê°€ëœ ë¶€ë¶„ -->
<div class="coupon-container">

  <!-- 18,000 ì¿ í° -->
  <div class="coupon-card">
    <img src="https://raw.githubusercontent.com/byungil-cho/OrcaX/orx-main/orcax-18000.jpg" alt="OrcaX 18000 ì¿ í°" onclick="openDesc('OrcaX 18,000 ORCX ì¿ í°', 'ì˜¤ì „ 11ì‹œ ì´ì „ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¡°ì¡° í• ì¸ ì¿ í°ì…ë‹ˆë‹¤.\n\nì‚¬ìš© ì‹œ 18,000 ORCX ìƒë‹¹ì˜ NFT 1ê°œ íšŒìˆ˜ë©ë‹ˆë‹¤.')" />
    <h3>OrcaX 18,000 ORCX ì¿ í°</h3>
    <p>ì¡°ì¡° í• ì¸ NFT<br/>ì˜¤ì „ 11ì‹œ ì´ì „ ì‚¬ìš© ê°€ëŠ¥</p>
    <button class="buy-btn" onclick="openModal('OrcaX 18,000 ORCX ì¿ í°', 18000)">êµ¬ë§¤í•˜ê¸°</button>
  </div>

  <!-- 20,000 ì¿ í° -->
  <div class="coupon-card">
    <img src="https://raw.githubusercontent.com/byungil-cho/OrcaX/orx-main/orcax-20000.jpg" alt="OrcaX 20000 ì¿ í°" onclick="openDesc('OrcaX 20,000 ORCX ì¿ í°', 'ì˜¤í›„ 2ì‹œ ì´ì „ ì‚¬ìš© ê°€ëŠ¥í•œ ê³¨í”„ ê²Œì„ë¹„ ì¿ í°ì…ë‹ˆë‹¤.\n\nì‚¬ìš© ì‹œ 20,000 ORCX ìƒë‹¹ì˜ NFT 1ê°œ íšŒìˆ˜ë©ë‹ˆë‹¤.')" />
    <h3>OrcaX 20,000 ORCX ì¿ í°</h3>
    <p>ì ì‹¬ í• ì¸ NFT<br/>ì˜¤í›„ 2ì‹œ ì´ì „ ì‚¬ìš© ê°€ëŠ¥</p>
    <button class="buy-btn" onclick="openModal('OrcaX 20,000 ORCX ì¿ í°', 20000)">êµ¬ë§¤í•˜ê¸°</button>
  </div>

  <!-- 25,000 ì¿ í° -->
  <div class="coupon-card">
    <img src="https://raw.githubusercontent.com/byungil-cho/OrcaX/orx-main/orcax-25000.jpg" alt="OrcaX 25000 ì¿ í°" onclick="openDesc('OrcaX 25,000 ORCX ì¿ í°', 'ì˜¤í›„ 2ì‹œ ì´í›„ ì‚¬ìš© ê°€ëŠ¥í•œ ê³¨í”„ ê²Œì„ë¹„ ì¿ í°ì…ë‹ˆë‹¤.\n\nì‚¬ìš© ì‹œ 25,000 ORCX ìƒë‹¹ì˜ NFT 1ê°œ íšŒìˆ˜ë©ë‹ˆë‹¤.')" />
    <h3>OrcaX 25,000 ORCX ì¿ í°</h3>
    <p>VVIP NFT<br/>ì‹œê°„ ì œí•œ ì—†ìŒ</p>
    <button class="buy-btn" onclick="openModal('OrcaX 25,000 ORCX ì¿ í°', 25000)">êµ¬ë§¤í•˜ê¸°</button>
  </div>

</div>

    <!-- ë” ì¶”ê°€ ê°€ëŠ¥ -->
  </div>

  <!-- ì„¤ëª… ëª¨ë‹¬ -->
  <div class="desc-modal" id="descModal">
    <div class="desc-modal-content">
      <span class="close-btn" onclick="closeDesc()">&times;</span>
      <h2 id="descTitle"></h2>
      <p id="descText"></p>
    </div>
  </div>

  <!-- ì£¼ë¬¸ ëª¨ë‹¬ -->
  <div class="modal" id="orderModal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <h2>ì£¼ë¬¸ ì •ë³´ ì…ë ¥</h2>
      <form id="orderForm">
        <input type="hidden" name="price" id="unitPrice" />
        <label>ì´ë¦„<input type="text" name="name" required /></label>
        <label>ì „í™”ë²ˆí˜¸<input type="text" name="phone" required /></label>
        <label>íŒ¬í…€ ì§€ê°‘ ì£¼ì†Œ<input type="text" name="wallet" required /></label>
        <label>ìˆ˜ëŸ‰<input type="number" name="quantity" min="1" value="1" required /></label>
        <div class="summary" id="orderSummary"></div>
        <button class="buy-btn" type="submit">ì œì¶œ</button>
      </form>
    </div>
  </div>

  <script>
    const modal = document.getElementById("orderModal");
    const form = document.getElementById("orderForm");
    const sellerWallet = "VxuxprfZzUuUonU7cBJtGngs1LGF5DcqR4iRFKwP7DZ"; // ì—¬ê¸°ì— íŒë§¤ì ì§€ê°‘ ì£¼ì†Œ

    document.getElementById("walletAddress").innerText = shortenWallet(sellerWallet);

    function openModal(title, price) {
      modal.style.display = "flex";
      document.getElementById("unitPrice").value = price;
      updateSummary();
    }

    function closeModal() {
      modal.style.display = "none";
    }

    function openDesc(title, text) {
      document.getElementById("descModal").style.display = 'flex';
      document.getElementById("descTitle").innerText = title;
      document.getElementById("descText").innerText = text;
    }

    function closeDesc() {
      document.getElementById("descModal").style.display = 'none';
    }

    form.quantity.addEventListener("input", updateSummary);

    function updateSummary() {
      const qty = parseInt(form.quantity.value);
      const unit = parseInt(form.price.value);
      const total = qty * unit;
      const bonus = Math.floor(qty / 10);
      const nftTotal = qty + bonus;
      document.getElementById("orderSummary").innerHTML =
        `ì´ì•¡: ${total.toLocaleString()} ORCX<br>ë³´ë„ˆìŠ¤: ${bonus}ì¥<br>ì´ NFT ìˆ˜ë ¹ ìˆ˜ëŸ‰: ${nftTotal}ì¥`;
    }

    form.addEventListener("submit", async function (e) {
      e.preventDefault();
      alert("ì£¼ë¬¸ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤! íŒ¬í…€ ì§€ê°‘ì—ì„œ ì§ì ‘ ORCXë¥¼ ì „ì†¡í•´ì£¼ì„¸ìš”.");
      closeModal();

      try {
        await fetch("http://localhost:3003/api/sms/order-notice", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "x-api-key": "orcax-top-secret" // .envì— ë„£ì€ í‚¤ì™€ ë§ì¶°ì•¼ í•¨
          },
          body: JSON.stringify({
            name: form.name.value,
            phone: form.phone.value,
            wallet: form.wallet.value,
            qty: form.quantity.value,
            nft: "OrcaX " + form.price.value + " ORCX ì¿ í°"
          })
        });
        console.log("ë¬¸ì ë°œì†¡ ìš”ì²­ ì™„ë£Œ!");
      } catch (err) {
        console.error("ë¬¸ì ë°œì†¡ ì‹¤íŒ¨:", err);
      }
    });

    function copyWallet() {
      navigator.clipboard.writeText(sellerWallet).then(() => {
        alert("ì§€ê°‘ ì£¼ì†Œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
      });
    }

    function shortenWallet(addr) {
      return addr.slice(0, 6) + "..." + addr.slice(-6);
    }

    async function connectPhantom() {
      if (window.solana && window.solana.isPhantom) {
        try {
          const resp = await window.solana.connect();
          alert("ì§€ê°‘ ì—°ê²° ì„±ê³µ: " + resp.publicKey.toString());
        } catch (err) {
          alert("ì§€ê°‘ ì—°ê²° ì‹¤íŒ¨");
        }
      } else {
        alert("Phantom ì§€ê°‘ì´ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.");
      }
    }
  </script>

</body>
</html>



